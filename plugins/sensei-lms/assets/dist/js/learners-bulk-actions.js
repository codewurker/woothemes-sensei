/******/jQuery(document).ready((function(){var e,t,n,s,r=jQuery.noConflict();!function(e){var __=wp.i18n.__,t=r("#bulk-action-user-ids"),n=r("#bulk-action-selector-top"),s=r(".sensei-course-select"),a=r(".sensei-bulk-action-select"),i=r(".sensei_user_select_id"),c=r("#cb-select-all-1"),o=r(".sensei-students__enrolled-courses-more-link"),l=r("#cb-select-all-2"),d=r("#sensei-bulk-learner-actions-modal-toggle"),u=function(t,n){t.on("click",(function(){e.resetSelectedUserIds(),t.is(":checked")?(n.attr("checked","checked"),i.attr("checked","checked"),i.each((function(t,n){e.updateSelectedUserIdsFromCheckbox(r(n))}))):(i.removeAttr("checked"),n.removeAttr("checked")),h()}))},h=function(){var n=e.validator(),s=n.validateBulkAction(),r=n.validateSelectedUserIds();window.dispatchEvent(new CustomEvent("enableDisableCourseSelectionToggle",{detail:{enable:s.isValid&&r.isValid}})),t.val(JSON.stringify(e.getUserIds()))};s.select2({placeholder:window.sensei_learners_bulk_data.select_course_placeholder,width:"200px"}),a.select2({minimumResultsForSearch:-1,width:"200px"}),i.on("change",(function(t){var n=r(this);t.preventDefault(),t.stopPropagation(),e.updateSelectedUserIdsFromCheckbox(n),h()})),u(c,l),u(l,c),d.attr("disabled",!0),o.on("click",(function(e){e.preventDefault(),e.stopPropagation(),r(e.target).addClass("hidden").prev().removeClass("hidden");var t=r(e.target).attr("data-user-id"),n=r(e.target).attr("data-nonce"),s=r(e.target).prev(),a={action:"get_course_list",user_id:t,nonce:n};r.ajax({type:"POST",url:ajax_object.ajax_url,data:a,success:function(e){s.append(e.data)},error:function(e){s.append("<p>"+__("There was an error fetching courses: ","sensei-lms")+e.statusText+": "+e.status+"</p>")}})})),n.on("change",(function(){e.setAction(n.val().trim()),h()}))}((e=[],t=[],n="",s={isValid:!0,reason:""},{updateSelectedUserIdsFromCheckbox:function(t){var n=parseInt(t.val(),10),s=e.indexOf(n);return t.is(":checked")?s<0&&e.push(n):s>-1&&e.splice(s,1),this},getUserIds:function(){return e},setAction:function(e){return n=e,this},setCourseIds:function(e){var n,s,a;return n=e,s=function(e){return parseInt(e,10)},a=[],r.each(n,(function(e,t){a.push(s(t))})),t=a,this},resetSelectedUserIds:function(){return e=[],this},resetAll:function(){return this.resetSelectedUserIds(),t=[],n="",this},validator:function(){return{validateBulkAction:function(){return""==n||0==n?{isValid:!1,reason:"Select an action"}:s},validateCourseIds:function(){return 0===(e=t,n=function(e){return!isNaN(e)},a=[],r.each(e,(function(e,t){n(t)&&a.push(t)})),a).length?{isValid:!1,reason:"Select a course"}:s;var e,n,a},validateSelectedUserIds:function(){return 0===e.length?{isValid:!1,reason:"Select some learners"}:s},validate:function(){for(var e,t=[this.validateSelectedUserIds,this.validateBulkAction,this.validateCourseIds];t.length>0;)if(!(e=t.shift().call(this)).isValid)return e;return s}}},validate:function(){return this.validator().validate()}}))}));